<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grasp Points Annotation App</title>
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <h2>Grasp Points Pipeline</h2>

            <div class="controls-panel">
                <h3>Configuration</h3>
                <div class="form-group">
                    <label for="objectSelect">Object:</label>
                    <select id="objectSelect">
                        <option value="">Loading...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="markerSelect">Marker ID:</label>
                    <select id="markerSelect" disabled>
                        <option value="">Select object first</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cameraDistance">Camera Distance:</label>
                    <input type="number" id="cameraDistance" value="0.5" step="0.1" min="0.1" max="2.0">
                </div>
                <div class="form-group">
                    <label for="minAreaThreshold">Min Area Threshold:</label>
                    <input type="number" id="minAreaThreshold" value="1000" step="100" min="100">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="useMtlColor"> Use MTL Color
                    </label>
                    <small>Enable to use object color from MTL file instead of default gray</small>
                </div>
            </div>

            <div class="controls-panel">
                <h3>Generate Grasp Points</h3>
                <button class="btn" id="runStep1" onclick="runStep1()">Run Step 1</button>
                <div id="step1-status"></div>
            </div>

            <div class="controls-panel">
                <h3>Filter Grasp Points</h3>
                <div class="form-group">
                    <label for="gripperMaxWidth">Gripper Max Width (mm):</label>
                    <input type="number" id="gripperMaxWidth" value="70.0" step="1" min="10">
                </div>
                <div class="form-group">
                    <label for="gripperHalfOpen">Gripper Half-Open Width (mm):</label>
                    <input type="number" id="gripperHalfOpen" value="30.0" step="1" min="10">
                </div>
                <div class="form-group">
                    <label for="gripperTipThickness">Gripper Tip Thickness (mm):</label>
                    <input type="number" id="gripperTipThickness" value="20.0" step="1" min="5">
                </div>
                <div class="form-group">
                    <label for="maxGapPx">Max Gap (px):</label>
                    <input type="number" id="maxGapPx" value="20" step="1" min="0">
                </div>
                <div class="form-group">
                    <label for="symmetryTolerance">Symmetry Tolerance (mm):</label>
                    <input type="number" id="symmetryTolerance" value="10.0" step="0.5" min="0">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="checkXAxis" checked> Check X-axis grasps
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="checkYAxis" checked> Check Y-axis grasps
                    </label>
                </div>
                <button class="btn" id="applyFilter" onclick="applyFilter()" disabled>Apply Filter</button>
                <div id="filter-status"></div>
            </div>

            <div class="controls-panel">
                <h3>Transform to All Markers</h3>
                <div class="form-group">
                    <label for="objectThickness">Object Thickness (m):</label>
                    <input type="number" id="objectThickness" value="" step="0.001" min="0" placeholder="Auto-detect">
                </div>
                <button class="btn btn-success" id="runStep2" onclick="runStep2()" disabled>Run Step 2</button>
                <div id="step2-status"></div>
            </div>

            <div class="controls-panel">
                <h3>Export Results</h3>
                <button class="btn btn-success" id="downloadBtn" onclick="downloadResults()" disabled>Download Results</button>
            </div>

            <div id="statusMessages"></div>
        </div>

        <div class="main-viewer">
            <div class="viewer-container" id="viewer">
                <div style="color: white; text-align: center;">
                    <h3>Visualization Area</h3>
                    <p class="viewer-text" style="margin-top: 20px;">Run Step 1 to see rendered images and grasp points</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
